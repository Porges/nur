version: 1.0

default:
    description: A welcoming message.
    run:
    - echo 'ğŸ‘‹ Hello from your nur file!'
    - echo 'ğŸ’¡ Now try `nur --list` to list other tasks you can run.'

more:
    description: ğŸ’¡ Now run this task with `nur more`â€¦
    run:
    - echo 'ğŸ¤– Running another taskâ€¦ beep boopâ€¦'
    - sleep 2
    - echo 'ğŸ’¡ You can run `nur --help` to see other available commands,\n   such as --check or --dry-run.'
    - echo
    - sleep 2
    - echo 'This concludes the â€œtutorialâ€. Enjoy!'

build-binary:
    description: Build the release binary.
    run:
    - sh: cargo build --release --target $TARGET --locked
      env: { TARGET: x86_64-unknown-linux-musl }

test-failure:
    deps: [afterSlow, fail]

afterSlow:
    deps: [slow]

slow:
    run: sleep 20

fail:
    run:
    - sleep 2
    - exit 123

test-parallel:
    deps: [sleep1, sleep2]

sleep1:
    run:
    - sleep 5
    - echo 'hello from 1'
    - sleep 5

sleep2:
    run:
    - sleep 5
    - echo 'hello from 2'
    - sleep 5
